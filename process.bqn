dtâ€¿json â† â€¢ImportÂ¨ "include/"âŠ¸âˆ¾Â¨"datetime.bqn"â€¿"json.bqn" # https://github.com/mlochbaum/bqn-libs
Fmt â† (0âŠ¸>/"-"Ë™)âˆ¾â€¢Fmtâˆ˜|
tâ†0 â‹„ ToUnix â† { "null":Fmt t+â†©1; Fmt âŒŠdt.FromTimestamp â€¢ParseFloatÂ¨ âˆŠâŸœ"-: "âŠ¸((âŠ¢-Ëœ+`Ã—Â¬)âŠ¸âŠ”) ğ•© }âˆ˜>
data â† json.Parse â€¢FChars âŠ‘â€¢args
! âˆ§Â´(<"name"â€¿"score"â€¿"modes"â€¿"ts")â‰¡Â¨âŠÂ¨data  # check key order hasnt changed
table â† (âŠ¢âŠ”ËœÂ·âŠ1âŠË˜âŠ¢) >(ToUnixâŒ¾(2âŠ¸âŠ‘)1âŒ½1âŠ¸âŠ)Â¨data    # read data, convert dates, rearrange, group by gamemode
high  â† >(âŠ¢âŠËœÂ·âŠ‘âˆ˜â’âŠË˜)Â¨table  # keep only highest scores per gamemode
hist  â† âˆ¾(âŠ¢/ËœÂ·(âŠ¢>Â¯9Â»âŒˆ`)âŠË˜)Â¨table  # keep scores that were higher than the earlier high score
date  â† Fmt âŒŠâ€¢UnixTime @ #â€¢file.Modified âŠ‘â€¢args    # for "last updated"
"high.txt"â€¿"hist.txt"{ğ•¨â€¢FLines date<âŠ¸âˆ¾(âŠ£âˆ¾' 'âˆ¾âŠ¢)Â´Â¨<Ë˜FmtâŒ¾âŠ‘Ë˜ğ•©}Â¨highâ€¿hist